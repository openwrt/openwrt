From 170347513+brudalevante@users.noreply.github.com Sat Sep 27 21:04:53 2025
From: brudalevante <170347513+brudalevante@users.noreply.github.com>
Date: Sat, 27 Sep 2025 21:04:53 +0200
Subject: [PATCH] net: phy: sfp: add quirk for H-COM SPP425H-GAB4 XGS-PON module

Add quirk for the H-COM SPP425H-GAB4 XGS-PON SFP+ module to use sfp_fixup_halny_gsfp.
This module requires the fixup for correct operation.

The module identifiers are based on working EEPROM and ethtool output.

Tested and confirmed working with the actual module on OpenWrt 24.10 (kernel 6.6.104).

Signed-off-by: brudalevante <170347513+brudalevante@users.noreply.github.com>
---
 drivers/net/phy/sfp.c | 3 +++
 1 file changed, 3 insertions(+)

--- a/drivers/net/phy/sfp.c
+++ b/drivers/net/phy/sfp.c
@@ -486,6 +486,9 @@ static const struct sfp_quirk sfp_quirks
 	// OEM SFP-GE-T is a 1000Base-T module with broken TX_FAULT indicator
 	SFP_QUIRK_F("OEM", "SFP-GE-T", sfp_fixup_ignore_tx_fault),
 
+	// H-COM SPP425H-GAB4 XGS-PON module (SFP+)
+	SFP_QUIRK_F("H-COM", "SPP425H-GAB4", sfp_fixup_halny_gsfp),
+
 	SFP_QUIRK_F("OEM", "SFP-10G-T", sfp_fixup_rollball_cc),
 	SFP_QUIRK_M("OEM", "SFP-2.5G-T", sfp_quirk_oem_2_5g),
 	SFP_QUIRK_M("OEM", "SFP-2.5G-BX10-D", sfp_quirk_2500basex),
From 0b6bed71689664080e1e9ec95aecf45279dde6ee Mon Sep 17 00:00:00 2001
From: Linus Walleij <linusw@kernel.org>
Date: Sat, 14 Feb 2026 00:21:13 +0100
Subject: [PATCH 2/2] gemini: augment RUT1xx DTS with botched partitions

Same botched partitions as the Raidsonic IB-4220-B.

Signed-off-by: Linus Walleij <linusw@kernel.org>
---
 arch/arm/boot/dts/gemini/gemini-rut1xx.dts | 37 +++++++++++++++++++++-
 1 file changed, 36 insertions(+), 1 deletion(-)

--- a/arch/arm/boot/dts/gemini/gemini-rut1xx.dts
+++ b/arch/arm/boot/dts/gemini/gemini-rut1xx.dts
@@ -74,7 +74,42 @@
 			status = "okay";
 			/* 8MB of flash */
 			reg = <0x30000000 0x00800000>;
-			/* TODO: add flash partitions here */
+			/*
+			 * Override the RedBoot partition table with fixed partitions
+			 * in order to create a coherent "firmware" partition so that
+			 * we can have optimal flash usage with OpenWrt in a big
+			 * MTD-splitted "firmware" partition.
+			 */
+			partitions {
+				compatible = "fixed-partitions";
+				#address-cells = <1>;
+				#size-cells = <1>;
+				partition@0 {
+					label = "BOOT";
+					reg = <0x00000000 0x00020000>;
+					read-only;
+				};
+				partition@1 {
+					compatible = "openwrt,executable-prolog";
+					label = "firmware";
+					reg = <0x00020000 0x007a0000>;
+				};
+				partition@2 {
+					label = "VCTL";
+					reg = <0x007c0000 0x00010000>;
+					read-only;
+				};
+				partition@3 {
+					label = "cfg";
+					reg = <0x007d0000 0x00020000>;
+					read-only;
+				};
+				partition@4 {
+					label = "FIS directory";
+					reg = <0x007f0000 0x00010000>;
+					read-only;
+				};
+			};
 		};
 
 		syscon: syscon@40000000 {

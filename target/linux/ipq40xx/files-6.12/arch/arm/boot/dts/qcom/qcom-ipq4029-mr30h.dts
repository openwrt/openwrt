// SPDX-License-Identifier: GPL-2.0-only
// Device Tree Source for Meraki MR30H (Noisy Cricket)

#include "qcom-ipq4029-meraki-insect.dtsi"

/ {
	model = "Meraki MR30H";
	compatible = "meraki,mr30h";

	leds {
		compatible = "gpio-leds";

		power_orange: power {
			color = <LED_COLOR_ID_AMBER>;
			function = LED_FUNCTION_POWER;
			gpios = <&tlmm 49 GPIO_ACTIVE_LOW>;
			panic-indicator;
		};

		led-0 {
			/* LAN 1 act */
			color = <LED_COLOR_ID_AMBER>;
			function = LED_FUNCTION_ACTIVITY;
			gpios = <&tlmm 33 GPIO_ACTIVE_LOW>;
		};

		led-1 {
			color = <LED_COLOR_ID_GREEN>;
			function = LED_FUNCTION_LAN;
			function-enumerator = <1>;
			gpios = <&tlmm 32 GPIO_ACTIVE_LOW>;
		};

		led-2 {
			/* LAN 2 act */
			color = <LED_COLOR_ID_AMBER>;
			function = LED_FUNCTION_ACTIVITY;
			gpios = <&tlmm 27 GPIO_ACTIVE_HIGH>;
		};

		led-3 {
			color = <LED_COLOR_ID_GREEN>;
			function = LED_FUNCTION_LAN;
			function-enumerator = <2>;
			gpios = <&tlmm 26 GPIO_ACTIVE_LOW>;
		};

		led-4 {
			/* LAN 3 act */
			color = <LED_COLOR_ID_AMBER>;
			function = LED_FUNCTION_ACTIVITY;
			gpios = <&tlmm 25 GPIO_ACTIVE_LOW>;
		};

		led-5 {
			color = <LED_COLOR_ID_GREEN>;
			function = LED_FUNCTION_LAN;
			function-enumerator = <3>;
			gpios = <&tlmm 24 GPIO_ACTIVE_LOW>;
		};

		led-6 {
			/* LAN 4 act */
			color = <LED_COLOR_ID_AMBER>;
			function = LED_FUNCTION_ACTIVITY;
			gpios = <&tlmm 23 GPIO_ACTIVE_LOW>;
		};

		led-7 {
			color = <LED_COLOR_ID_GREEN>;
			function = LED_FUNCTION_LAN;
			function-enumerator = <4>;
			gpios = <&tlmm 22 GPIO_ACTIVE_LOW>;
		};
	};

	soc {
		ess_tcsr@1953000 {
			qcom,ess-interface-select = <TCSR_ESS_PSGMII>;
		};
	};

        gpio_export {
                compatible = "gpio-export";
                #size-cells = <0>;

                pse_en {
                        gpio-export,name = "pse_en";
                        gpio-export,output = <1>;
                        gpios = <&tlmm 28 GPIO_ACTIVE_LOW>;
                };

                poeaf_det {
                        gpio-export,name = "poeaf_det";
                        gpio-export,input = <0>;
                        gpios = <&tlmm 29 GPIO_ACTIVE_HIGH>;
                };

        };
};

&tricolor {
	enable-gpio = <&tlmm 48 GPIO_ACTIVE_HIGH>;
};

&pcie0 {
	status = "okay";
	perst-gpio = <&tlmm 38 GPIO_ACTIVE_LOW>;
	wake-gpio = <&tlmm 50 GPIO_ACTIVE_LOW>;
};

&pcie_bridge0 {
	wifi2: wifi@0,0 {
		compatible = "qcom,ath10k";
		reg = <0x00010000 0 0 0 0>;
		nvmem-cells = <&cal_factory_9000>;
		nvmem-cell-names = "calibration";
	};
};

&wifi0 {
	status = "okay";
	qcom,ath10k-calibration-variant = "Meraki-MR30H";
};

&wifi1 {
	status = "okay";
	qcom,ath10k-calibration-variant = "Meraki-MR30H";
};

&swport1 {
	label = "lan4";
	status = "okay";
};

&swport2 {
	label = "lan3";
	status = "okay";
};

&swport3 {
	label = "lan2";
	status = "okay";
};

&swport4 {
	label = "lan1";
	status = "okay";
};

&swport5 {
	label = "lan5";
	status = "okay";
};

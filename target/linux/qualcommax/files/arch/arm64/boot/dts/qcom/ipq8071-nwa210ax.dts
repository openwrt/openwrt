// SPDX-License-Identifier: GPL-2.0-or-later OR MIT
/*
 * Copyright (c) 2025 Pascal Beleiu <pascal@beleiu.de>
 * Copyright (c) 2025 Eric Sch√§fer <eric@es86.de>
 */

/dts-v1/;

#include "ipq807x-nwax10ax.dtsi"

/ {
	model = "Zyxel NWA210AX";
	compatible = "zyxel,nwa210ax", "qcom,ipq8074";

	aliases {
		ethernet0 = &dp5;
		ethernet1 = &dp1;
		label-mac-device = &dp5;
	};

	leds {
		compatible = "gpio-leds";

		gpio_green {
			gpios = <&tlmm 50 GPIO_ACTIVE_HIGH>;
			default-state = "off";
			color = <LED_COLOR_ID_GREEN>;
			function = LED_FUNCTION_STATUS;
		};

		gpio_red {
			gpios = <&tlmm 51 GPIO_ACTIVE_HIGH>;
			default-state = "off";
			color = <LED_COLOR_ID_RED>;
			function = LED_FUNCTION_STATUS;
		};
	};
};

&tlmm {
	button_pins: button-pins {
		pins = "gpio30";
		function = "gpio";
		drive-strength = <8>;
		bias-pull-up;
	};
};

&switch {
	switch_lan_bmp = <(ESS_PORT1 | ESS_PORT5)>;
	switch_mac_mode = <MAC_MODE_SGMII_CHANNEL0>;
	switch_mac_mode1 = <MAC_MODE_SGMII_PLUS>;
};

&phyinfo {
	port@5 {
		port_id = <5>;
		phy_address = <16>;
		port_mac_sel = "QGMAC_PORT";
	};
};

&mdio {
	qca8081: ethernet-phy@16 {
		compatible = "ethernet-phy-id004d.d101";
		reg = <16>;
		reset-deassert-us = <10000>;
		reset-gpios = <&tlmm 44 GPIO_ACTIVE_LOW>;
	};
};

&dp1 {
	label = "lan1";
	nvmem-cell-names = "mac-address";
	nvmem-cells = <&label_mac 1>;
};

&dp5 {
	status = "okay";
	phy-handle = <&qca8081>;
	phy-mode = "sgmii";
	label = "uplink";
	nvmem-cell-names = "mac-address";
	nvmem-cells = <&label_mac 0>;
};

&wifi {
	qcom,ath11k-calibration-variant = "Zyxel-NWA210AX";
};

--- a/os_dep/linux/ioctl_linux.c
+++ b/os_dep/linux/ioctl_linux.c
@@ -12347,7 +12347,7 @@ static iw_handler rtw_private_handler[]
 	rtw_test,						/* 0x1D */
 };
 
-#if WIRELESS_EXT >= 17
+#if defined(CONFIG_WIRELESS_EXT) && WIRELESS_EXT >= 17
 static struct iw_statistics *rtw_get_wireless_stats(struct net_device *dev)
 {
 	_adapter *padapter = (_adapter *)rtw_netdev_priv(dev);
